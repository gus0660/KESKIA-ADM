<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KESKIA ADM</title>
    <link rel="shortcut icon" href="images/favicon.ico" />
    
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="node_modules/bootstrap-icons/font/bootstrap-icons.css">

    <link rel="stylesheet" href="styles.css" />
</head>

<body class="mon-compte">

    <header id="navbar-container"></header>

    <div class="d-flex align-items-center justify-content-center" style="min-height: 100vh;">
        <div class="container compte">
            <form id="accountForm" class="card-body">
                <div class="row gutters">
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                        <div class="form-group">
                            <label for="fullName">Nom Prenom</label>
                            <input type="text" class="form-control no-special-char" id="fullName" placeholder="Nom Prenom" required />
                        </div>

                        <div class="form-group">
                            <label for="eMail">Email</label>
                            <input type="email" class="form-control" id="eMail" placeholder="Entez votre email ID" required />
                        </div>

                        <div class="form-group">
                            <label for="identifiant">Identifiant</label>
                            <input type="text" class="form-control no-special-char" id="identifiant" placeholder="Identifiant" required />
                        </div>
                    </div>

                    <!-- Colonne de droite (Téléphone, Password, Confirm Password) -->
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                        <div class="form-group">
                            <label for="phone">Téléphone</label>
                            <input type="text" class="form-control" id="phone" placeholder="..." required />
                        </div>

                        <div class="form-group order-1 order-sm-2">
                            <label for="password">Mot De Passe</label>
                            <input type="password" class="form-control" id="password" placeholder="..." required />
                        </div>

                        <div class="form-group order-2 order-sm-1">
                            <label for="confirmPassword">Confirmez votre Mot De Passe</label>
                            <input type="password" class="form-control" id="confirmPassword" placeholder="..." required />
                        </div>
                    </div>
                </div>


                <div class="row gutters">
                    <div class="col-12 mb-2">
                        <div class="text-center mt-md-4"> <!-- Marges plus grandes uniquement sur md et plus grands -->
                            <button type="button" id="cancel" name="cancel"
                                class="btn btn-secondary btn-lg mx-2">Cancel</button>
                            <button type="submit" id="update" name="update"
                                class="btn btn-primary btn-lg mx-2">Confirmez votre Compte</button>
                            <button type="button" id="deleteAccount" class="btn btn-danger btn-lg mx-2">Supprimer le
                                Compte</button>

                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div id="footer-container"></div>

    
    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/popper.js/dist/umd/popper.min.js"></script>
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="main.js"></script>
    <script>
        includeNavbar();
        includeFooter();
        function setupAccountForm(isLoggedIn, storedUserData) {
  var accountForm = document.querySelector('#accountForm');
  if (accountForm) {
    if (isLoggedIn && storedUserData) {
      // Utilisateur connecté - Pré-remplir le formulaire
      storedUserData = JSON.parse(storedUserData);
      console.log("Données utilisateur actuelles dans localStorage:", storedUserData);
      // Remplir le formulaire avec les données de l'utilisateur
      // ...
    }

    accountForm.addEventListener('submit', function (event) {
      event.preventDefault();
      if (!validateForm()) {
        console.log("Validation du formulaire échouée");
        return; // Arrête l'exécution si la validation échoue
      }

      let user = {
        fullName: document.querySelector('#fullName').value,
        email: document.querySelector('#eMail').value,
        identifiant: document.querySelector('#identifiant').value,
        phone: document.querySelector('#phone').value,
        password: document.querySelector('#password').value
      };

      localStorage.setItem('user', JSON.stringify(user));
      localStorage.setItem('isUserLoggedIn', 'true');
      console.log("Utilisateur enregistré dans localStorage:", user);
      alert("Votre compte est créé");
      event.stopPropagation()
      window.location.href = 'mon-compte.html';
      console.log("Redirection vers 'mon-compte.html'");
    });
  } else {
    console.log("Formulaire de compte '#accountForm' non trouvé sur cette page.");
  }
}
    </script>
</body>

</html>